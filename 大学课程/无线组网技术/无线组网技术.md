# NB-IOT 的技术特点

> [!NOTE] NB-IoT（Narrowband Internet of Things，**窄带物联网**）是一种专为物联网（IoT）设计的低功耗、宽覆盖的蜂窝通信技术。

1. 低功耗
2. 低成本
3. 广覆盖
4. 支持大量连接
5. 低速率
6. 稳定可靠且灵活
# 无线传感网的特点
1. 网络规模大
2. 无中心和自组织网络
3. 网络动态性强
4. 以数据为中心的网络
5. 通信半径小，带宽窄
6. 传感器节点体积较小，集成度很高
7. 应用相关的网络
# 典型短距离无线通信技术
1. 蓝牙技术
2. WIFI技术
3. Zigbee技术
# IP 地址

> [!Cite] IPv4
> Pv4（Internet Protocol version 4）地址是目前互联网上使用最广泛的IP地址版本。由**32位**二进制数组成，通常表示为四组十进制数，每组数范围为0到255，组与组之间用点（.）分隔，所以叫做**点分十进制**表示法。
> 

> [!title] IPv6
> 在IPv6地址中，由于地址长度为**128位**，使用**冒分十六进制**表示法（Colon-Hexadecimal Notation）。在这种表示法中，128位的地址被分为8组，每组16位，以十六进制数表示，组与组之间用冒号（:）分隔。

# 三种网络拓扑结构

### 星型拓扑结构

> [!NOTE] 优点
> - 结构简单，易于安装和管理。
> - 所有通信都通过中心节点（协调器）进行，便于监控和控制。
> - 如果中心节点故障，整个网络的其余部分仍然可以保持局部功能。

> [!error] 缺点
> - 中心节点（协调器）可能成为网络的单一故障点。
> - 中心节点（协调器）的性能可能成为网络通信的瓶颈。
> - 覆盖范围有限，依赖于中心节点的传输能力。


![[../../Excalidraw/星型拓扑结构.excalidraw|星型拓扑结构|500]]

### 树形拓扑结构


> [!NOTE] 优点
> - 扩展性强，可以通过增加更多的子节点来扩展网络。
> - 适合覆盖较大的区域。
> - 可以通过多级节点减少干扰和提高信号质量。

> [!error] 缺点
> - 如果根节点（协调器）故障，整个网络可能会受到影响。
> - 维护和更新可能比较复杂，尤其是网络层次较深时。
> - 信息只有唯一的路由通道，可能存在通信延迟，因为数据需要通过多个层次传递。
> 

![[../../Excalidraw/树形拓扑结构.excalidraw|树形拓扑结构.excalidraw]]

### 网状拓扑结构

> [!NOTE] 优点
> - 高度可靠，减少了消息延迟，因为数据可以通过多条路径传输。
> - 覆盖范围广，网络可以通过动态路由适应节点位置的变化。
> - 网络的**鲁棒性**好，即使部分节点故障，网络仍然可以保持通信。

> [!error] 缺点
> - 安装和配置相对复杂。
> - 需要更多的资源存储空间和计算能力来维护路由信息。
> - 可能会导致较高的功耗，因为节点需要不断地交换路由信息。
> 

![[../../Excalidraw/网状拓扑结构.excalidraw|网状拓扑结构.excalidraw]]
# 典型**短**距离无线通信技术
1. 蓝牙
2. WiFi
3. Zigbee
4. UWB（Ultra-Wideband，超宽带）
5. 红外（Infrared，IR）
# Z-Stack协议栈的设备组成

> [!tip] 协调器
> 作用：
> 1. ZigBee网络中的**关键设备**，负责网络的创建和管理。
> 2. 每个 ZigBee 网络**只能有一个协调器**，但可以有多个路由器和终端节点。
> 3. 它是网络的**第一个设备**，也是网络的启动点。

> [!box] 路由器
> 作用：
> 1. 路由器是 ZigBee 网络中的**全功能设备**，可以发送、接收和路由数据包。
> 2. 路由器可以加入网络、离开网络，也可以允许其他设备通过它加入网络，多跳路由可协助终端设备通信。
> 3. 路由器负责维护网络的路由表。
> 4. 只有在**树形**网络拓扑结构时，才能使用电池供电。
> 

> [!NOTE] 终端节点
> 作用：
> 1. 终端节点通常是最简单的设备，它的主要功能是发送和接收数据。
> 2. 终端节点一般不参与路由操作，也不允许其他设备通过它加入网络。
> 3. 功耗较低，长时间处于休眠状态，只在需要发送或接收数据时才激活。
> 4. 在 Z-Stack 协议栈中，默认的心跳周期是 1000ms，该设备可由电池供电。
> 
# Z-Stack 操作系统

> [!box] OSAL（Operating System Abstraction Layer，**操作系统抽象层**）
> 本质是一种支持多任务运行的系统资源分配机制
> 提供的功能：
> 1. 任务注册、初始化、互斥
> 2. 任务间的同步、互斥
> 3. 中断处理
> 4. 存储器分配和管理
> 5. 提供定时器功能
# 蓝牙组建网络

> [!bug] 微微网（Piconet）
蓝牙技术中的一种网络拓扑结构，它是由一个主设备（Master）和**最多七个从设备**（Slave）组成的临时网络。
微微网的名称来源于“pico”，意指小型的、微小的，因为**这种网络是临时形成的，规模较小**。

# NB-IOT 模块 AT 指令

```AT
AT+NBAND=1  //联通频段（频率 2100 MHz）

AT+NBAND=3  //联通频段（频率 1800 MHz）

AT+NBAND=5  //电信频段（频率 850 MHz）

AT+NBAND=8  //移动频段（频率 900 MHz）
```



