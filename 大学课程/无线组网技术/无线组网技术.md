> [!NOTE] Zigbee 网络中容纳最多 65535 台设备
# 无线传感网的特点
1. 网络规模大
2. 无中心和自组织网络
3. 网络动态性强
4. 以数据为中心的网络
5. 通信半径小，带宽窄
6. 传感器节点体积较小，集成度很高
7. 应用相关的网络
# 自组织网络
1. 无线传感网
2. ADHOC网络
# IP 地址

> [!Cite] IPv4
> Pv4（Internet Protocol version 4）地址是目前互联网上使用最广泛的IP地址版本。由**32位**二进制数组成，通常表示为四组十进制数，每组数范围为0到255，组与组之间用点（.）分隔，所以叫做**点分十进制**表示法。
> 

> [!title] IPv6
> 在IPv6地址中，由于地址长度为**128位**，使用**冒分十六进制**表示法（Colon-Hexadecimal Notation）。在这种表示法中，128位的地址被分为8组，每组16位，以十六进制数表示，组与组之间用冒号（:）分隔。

# 三种网络拓扑结构

### 星型拓扑结构

> [!NOTE] 优点
> - 结构简单，易于安装和管理。
> - 所有通信都通过中心节点（协调器）进行，便于监控和控制。
> - 如果中心节点故障，整个网络的其余部分仍然可以保持局部功能。

> [!error] 缺点
> - 中心节点（协调器）可能成为网络的单一故障点。
> - 中心节点（协调器）的性能可能成为网络通信的瓶颈。
> - 覆盖范围有限，依赖于中心节点的传输能力。

![[../../Excalidraw/星型拓扑结构.excalidraw|星型拓扑结构|1000]]

### 树形拓扑结构


> [!NOTE] 优点
> - 扩展性强，可以通过增加更多的子节点来扩展网络。
> - 适合覆盖较大的区域。
> - 可以通过多级节点减少干扰和提高信号质量。

> [!error] 缺点
> - 如果根节点（协调器）故障，整个网络可能会受到影响。
> - 维护和更新可能比较复杂，尤其是网络层次较深时。
> - 信息只有唯一的路由通道，可能存在通信延迟，因为数据需要通过多个层次传递。
> 

![[../../Excalidraw/树形拓扑结构.excalidraw|树形拓扑结构.excalidraw|1000]]

### 网状拓扑结构

> [!NOTE] 优点
> - 高度可靠，减少了消息延迟，因为数据可以通过多条路径传输。
> - 覆盖范围广，网络可以通过动态路由适应节点位置的变化。
> - 网络的**鲁棒性**好，即使部分节点故障，网络仍然可以保持通信。

> [!error] 缺点
> - 安装和配置相对复杂。
> - 需要更多的资源存储空间和计算能力来维护路由信息。
> - 可能会导致较高的功耗，因为节点需要不断地交换路由信息。
> 

![[../../Excalidraw/网状拓扑结构.excalidraw|网状拓扑结构.excalidraw|1000]]
# 典型**短**距离无线通信技术
1. 蓝牙
2. WiFi
3. Zigbee
4. UWB（Ultra-Wideband，超宽带）
5. 红外（Infrared，IR）
# Z-Stack
### Z-Stack协议栈的设备组成

> [!tip] 协调器
> 作用：
> 1. ZigBee网络中的**关键设备**，负责网络的创建和管理。
> 2. 每个 ZigBee 网络**只能有一个协调器**，但可以有多个路由器和终端节点。
> 3. 它是网络的**第一个设备**，也是网络的启动点。

> [!box] 路由器
> 作用：
> 1. 路由器是 ZigBee 网络中的**全功能设备**，可以发送、接收和路由数据包。
> 2. 路由器可以加入网络、离开网络，也可以允许其他设备通过它加入网络，多跳路由可协助终端设备通信。
> 3. 路由器负责维护网络的路由表。
> 4. 只有在**树形**网络拓扑结构时，才能使用电池供电。
> 

> [!NOTE] 终端节点
> 作用：
> 1. 终端节点通常是最简单的设备，它的主要功能是发送和接收数据。
> 2. 终端节点一般不参与路由操作，也不允许其他设备通过它加入网络。
> 3. 功耗较低，长时间处于休眠状态，只在需要发送或接收数据时才激活。
> 4. 在 Z-Stack 协议栈中，默认的心跳周期是 1000ms，该设备可由电池供电。
> 
### Z-Stack 操作系统

> [!box] OSAL（Operating System Abstraction Layer，**操作系统抽象层**）
> 本质是一种支持多任务运行的系统资源分配机制
> 提供的功能：
> 1. 任务注册、初始化、互斥
> 2. 任务间的同步、互斥
> 3. 中断处理
> 4. 存储器分配和管理
> 5. 提供定时器功能
> 

# 蓝牙

> [!NOTE] 蓝牙（Bluetooth）是一种无线技术标准。
### 蓝牙 4.0
> [!NOTE] 蓝牙4.0版本
> 一个重要的里程碑，它整合了**传统蓝牙**（BR/EDR）、**高速蓝牙**（Bluetooth High Speed, HS）和**低功耗蓝牙**（Bluetooth Low Energy, BLE）三种技术。
### 蓝牙基带协议

> [!quote] 
> 蓝牙基带协议结合了电路交换和分组交换两种通信方式。**电路交换主要用于建立和维护连接**，而**分组交换则用于数据的传输**。
### 蓝牙网络结构

> [!bug] 微微网（Piconet）
蓝牙技术中的一种网络拓扑结构，它是由一个主设备（Master）和**最多七个从设备**（Slave）组成的临时网络。
微微网的名称来源于“pico”，意指小型的、微小的，因为**这种网络是临时形成的，规模较小**。

> [!done] 散射网（Scatternet）
> **由多个微微网组成**的网络结构，它允许设备在多个微微网之间进行通信。在散射网中，一个设备可以同时作为多个微微网的一部分，从而实现在较广范围内多个设备之间的复杂通信。

# NB-IOT

> [!NOTE] NB-IoT（Narrowband Internet of Things，**窄带物联网**）是一种专为物联网（IoT）设计的低功耗、宽覆盖的蜂窝通信技术。
### NB-IOT 的技术特点
1. 低功耗
2. 低成本
3. 广覆盖
4. 支持大量连接
5. 稳定可靠且灵活
### NB-IOT 模块 AT 指令

```AT
AT+CPIN     //查询SIM卡状态

AT+CSQ      //查询信号质量

AT+COPS     //查询当前运营商

AT+NBAND=1  //联通频段（频率 2100 MHz）

AT+NBAND=3  //联通频段（频率 1800 MHz）

AT+NBAND=5  //电信频段（频率 850 MHz）

AT+NBAND=8  //移动频段（频率 900 MHz）
```

### NB-IOT 模块（NB86-G）工作模式的切换

![[../../ASLant_Files/2024-06-29-11-59-54.png|900]]

### NB-IOT 的部署模式
> [!NOTE] NB-IoT 支持三种主要的部署模式，每种模式都有其特定的应用场景和优势：
> 1. **独立部署模式（Stand-Alone）**：
>    - 在独立部署模式下，NB-IoT 使用未使用的 GSM 频段或分配给 LTE 的频段。这种模式允许运营商在没有 LTE 网络的情况下提供 NB-IoT 服务。
>    - 优点是可以充分利用现有的 GSM 网络基础设施，降低部署成本。
>    - 这种模式适用于需要广覆盖和低功耗的物联网应用，尤其是在偏远地区。
> 2. **保护带部署模式（Guard Band）**：
>    - 保护带部署模式利用 LTE 频谱中未使用的保护带来部署 NB-IoT。这种模式不需要额外的频谱资源，因为它是利用 LTE 网络频谱的边缘部分。
>    - 优点是可以与现有的 LTE 网络共存，无需对网络结构进行大规模改造。
>    - 这种模式适用于需要与 LTE 网络共存的场景，以及需要较高数据速率的物联网应用。
> 3. **带内部署模式（In-Band）**：
>    - 带内部署模式将 NB-IoT 直接部署在 LTE 频段的内部，与 LTE 网络共享同一频谱资源。
>    - 优点是可以更加灵活地分配频谱资源，根据需要动态调整 NB-IoT 和 LTE 的带宽。
>    - 这种模式适用于频谱资源紧张的地区，以及需要高网络容量和频谱效率的场景。
### NB-IOT 网络体系架构
![[../../ASLant_Files/2024-06-29-11-54-56.png|800]]
# WiFi 技术
### WiFi 的优点
1. 无线电波覆盖范围广
2. 速度快，可靠性高
3. 方便、可移动、易于安装
4. 健康安全
### WiFi 的缺点
1. 信号干扰和衰减
2. 带宽不够高
3. 切换时间长
### WiFi 无线控制数据流传输拓扑图
![[ASLant_Files/c28ba328d4f79ec4c07bac283e76a2d.jpg|800]]
##### 应用场景

> [!NOTE] 应用场景
> 
> 1. **智能家居控制**：
>    - 用户可以通过手机或电脑上的客户端程序，通过 WiFi 网络控制家里的传感器和继电器设备，例如智能灯泡、温控器、门锁等。ARM 核心板负责接收和处理这些控制命令。
> 
> 2. **远程监控系统**：
>    - 安装在远程位置的传感器可以通过 ARM 核心板收集数据并通过 WiFi 模块传输到中央监控系统。用户可以通过 PC 或手机查看和分析这些数据，实现远程监控和管理。
> 
> 3. **工业自动化**：
>    - 工厂中的设备和传感器通过 WiFi 网络连接到中央控制系统。工厂管理员可以通过 PC 或手机上的客户端程序，实时监控和控制生产线上的设备状态，提升生产效率和安全性。
> 
> 4. **环境监测**：
>    - 环境传感器（如空气质量监测器、温湿度传感器）将数据通过 ARM 核心板和 WiFi 模块传输到云端。用户可以通过客户端程序查看实时环境数据，进行数据分析和预警。
> 
> 5. **智能农业**：
>    - 农田中的各种传感器（如土壤湿度传感器、温度传感器）通过 WiFi 网络与中央控制系统连接。农民可以通过手机或电脑监控农田环境，并根据数据自动或手动控制灌溉系统等设备，提高农业生产效率。

### WiFi 技术的安全性
##### WiFI 安全隐患：
1. 网络攻击 
2. 网络钓鱼
### WiFi 安全机制

> [!NOTE] 主要通过网络加密和访问控制来实现
# 设计一个物联网系统

> [!box]
> 
> - [[温室大棚、谷仓、粮仓系统]]
> 
