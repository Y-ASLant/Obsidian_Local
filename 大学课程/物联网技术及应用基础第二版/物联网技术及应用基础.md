## 物联网的概念

> [!NOTE]
> 物联网技术物物相连的互联网，是将各种信息传感器设备如红外感应器、全球定位系统等装置和系统与互联网结合起来而形成的一个巨大网络，目的是让所有的物品都与网络连接在一起，方便识别和管理。

## 物联网的网络架构

> [!NOTE]
> 感知层：全面感知，主要实现智能感知和交互功能
> 网络层：可靠传递，主要实现信息的接入、传输和通信。
> 应用层：智能处理，主要实现信息的处理与决策。

## REID系统的组成

电子标签：由耦合元件、芯片和天线组成附着在物体上。

阅读器：是读取（或写入）电子标签数据信息的设备

后台管理系统：最简单的RFID系统只有一个阅读器，他一次只对一个电子标签进行操作

GPS的工作原理:

GPS的定位原理就是利用空间分布的卫星及卫星与地面点的距离交会得出地面点位置

其他短距离定位技术：

红外定位技术  超声波定位技术  RFID定位技术 超宽带定位技术 蓝牙定位技术

无线传感器网络的概念：

无线传感器网络是信息科学领域中一个全新的发展方向，是新兴学科与传统学科进行领域间交叉的结果，无线传感器网络将网络技术引入到无线智能传感器中，使得传感器不再是单个的感知单元，而是能够交换信息、协调控制的有机结合体，实现物与物的互联。

无线传感器网络信息传输的方式：无线通信方式

无线传感器网络安全攻击种类：

物理破坏  信息泄露  阻塞攻击  耗尽攻击  路由攻击 碰撞攻击 选择转发攻击

物联网中常用的单片机：

ESP8266、STM32、51单片机、Arduino、Raspberry Pi

# 实验
## ESP 系列引脚图
-  [[../../IOT/ESP32/ESP32 引脚图|ESP32 引脚图]]
-  [[../../IOT/ESP8266/ESP8266 引脚图|ESP8266 引脚图]]
## LED 闪烁
> [!bug] 板载 LED 默认是在 GPIO2 上

```cpp
#include <Arduino.h>  //可带可不带
#define LED 2
void setup() {
  pinMode(LED, OUTPUT);  // 初始化引脚为输出模式
}

void loop() {
  digitalWrite(LED, LOW);   // 打开LED
  delay(1000);              // 等待一秒钟
  digitalWrite(LED, HIGH);  // 关闭LED
  delay(1000);              // 再次等待一秒钟
}
```
## AP 模式
![[../../ASLant_Files/2024-06-27-11-58-07.png]]

> [!NOTE] AP 模式下默认 IP 为 192.168.4.1

```cpp
#include <WiFi.h>

void setup() {
  Serial.begin(115200);
  delay(10);
  WiFi.mode(WIFI_AP);                             // 设置ESP32工作模式为AP
  Serial.println("Configuring access point...");  // 创建网络
  WiFi.softAP("ESP32_AP", "12345678.");           // SSID为"ESP32_AP"，密码为12345678.
  Serial.println("Access Point IP Address:");     // 打印AP的IP地址
  Serial.println(WiFi.softAPIP());
}

void loop() {
}
```
## STA 模式
![[../../ASLant_Files/2024-06-27-12-18-46.png]]

```cpp
#include <WiFi.h>

// 连接您的WiFi网络名称和密码
const char* ssid = "ASLant";
const char* password = "123456789";

void setup() {
  Serial.begin(115200);
  delay(10);

  WiFi.mode(WIFI_STA);  // 设置ESP32工作模式为STA

  // 连接到WiFi网络
  Serial.print("Connecting to ");
  Serial.println(ssid);
  WiFi.begin(ssid, password);

  // 等待连接到WiFi
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println("WiFi connected");
  Serial.println("IP address: ");
  Serial.println(WiFi.localIP());
}

void loop() {
}
```

## 按键控制 LED

> [!tldr] 按键按下亮，松开灭

```cpp
#include <Arduino.h>  //可带可不带
#define BUTTON 5      // 按钮 GPIO5
#define LED 2         // LED GPIO2

void setup() {
  pinMode(BUTTON, INPUT_PULLUP);  // 将按钮引脚设置为输入上拉模式
  pinMode(LED, OUTPUT);           // 将LED引脚设置为输出模式
}

void loop() {
  if (digitalRead(BUTTON) == LOW)  // 如果按钮被按下
  {
    digitalWrite(LED, HIGH);  // 打开LED
  } else {
    digitalWrite(LED, LOW);  // 关闭LED
  }
}
```
## ESP32 内部霍尔传感器

> [!NOTE] 使用内部霍尔传感器获取磁场强度的值，并控制 LED 的状态
> 小于等于 0 时，LED 点亮
> 大于 0 时，LED 熄灭

```cpp
const int LED = 2;
int value = 0;
void setup() {
  pinMode(LED, OUTPUT);
}

void loop() {
  value = hallRead();
  if (value <= 0) {  //数值小于等于0，点亮板载led灯
    digitalWrite(LED, HIGH);
  } else {
    digitalWrite(LED, LOW);
  }
  delay(1000);
}
```
## 读取触摸数值

> [!NOTE] 如果触摸数值小于 50 就点亮 LED，否则就关闭，100ms 读取一次

```cpp
void setup() {
  pinMode(2, OUTPUT);  // 设置板载LED引脚为输出
  Serial.begin(115200);
}

void loop() {
  int touchValue = touchRead(15);  // 读取触摸引脚的值
  Serial.println(touchValue);      // 打印
  if (touchValue < 50) {           // 如果触摸值小于50，点亮LED
    digitalWrite(2, HIGH);         // 点亮LED
  } else {
    digitalWrite(2, LOW);  // 关闭LED
  }
  delay(100);  // 稍作延迟，避免过度刷新
}
```
