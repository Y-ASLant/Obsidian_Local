# 2024.05.21 华清远见实训日报
# 芯片简介 STM32F103RBT6
![[ASLant_Images/1fa4faa4e2ec81aff96846a6e90d6a42_MD5.jpg]]

# 核心板简介

![[ASLant_Images/d48361d2903f37a260ca67b4e0128fc7_MD5.jpg]]

# 所需软件

![[ASLant_Images/b8acbc96f222257e618e97c65d846def_MD5.jpg]]

# 裸机开发 &系统开发

裸机开发（Bare Metal Development）通常指的是在没有操作系统支持的情况下直接在硬件上开发软件。这种开发需要直接操作硬件资源，包括处理器、内存、输入输出等，并且需要手动管理所有资源和硬件接口。裸机开发通常用于嵌入式系统开发或者对硬件进行底层控制的应用中。

而系统开发则是指在操作系统的基础上进行软件开发。在这种情况下，开发者可以利用操作系统提供的各种服务和资源管理功能，比如进程管理、内存管理、文件系统等。系统开发通常是在一个相对高层的抽象层次上进行，开发者可以使用操作系统提供的接口和服务来简化开发过程。

**因此，裸机开发和系统开发的主要区别在于开发者在开发过程中对硬件资源的直接控制程度以及所处的抽象层次不同。**

# ARM 公司芯片类型

Cortex-A：性能较高，目前手机 CPU 应用比较广
Cortex-R：实时性比较强，车机系统
Cortex-M：单片机，MCU

# ST 芯片命名规则

![[ASLant_Images/a875283ba589fa94009e79b168d47189_MD5.jpg]]

# GPIO 的工作模式
### 4 种输入模式

|         模式名称          | 中文名称 |    性质    |               特征               |
| :-------------------: | :--: | :------: | :----------------------------: |
| GPIO_Mode_IN_FLOATING | 浮空输入 |   数字输入   |      可读取引脚电平，若引脚悬空，则电平不确定      |
|     GPIO_Mode_IPU     | 上拉输入 |   数字输入   | 可读取引脚电平，内部链接上拉电阻，**悬空时默认为高电平** |
|     GPIO_Mode_IPD     | 下拉输入 |   数字输入   | 可读取引脚电平，内部链接下拉电阻，**悬空时默认为低电平** |
|     GPIO_Mode_AIN     | 模拟输入 | **模拟输入** |      GPIO 无效，引脚直接接入内部 ADC      |

### 4 种输出模式  

|       模式名称       |    中文名称    |  性质  |            特征             |
| :--------------: | :--------: | :--: | :-----------------------: |
| GPIO_Mode_Out_OD |    开漏输出    | 数字输出 | 可输出引脚电平，高电平为高阻态，低电平接 VSS  |
| GPIO_Mode_AF_OD  | **复用开漏**输出 | 数字输出 | 由片上外设控制，高电平为高阻态，低电平接 VSS  |
| GPIO_Mode_Out_PP |    推挽输出    | 数字输出 | 可输出引脚电平，高电平接 VDD，低电平接 VSS |
| GPIO_Mode_AF_PP  | **复用推挽**输出 | 数字输出 | 由片上外设控制，高电平接 VDD，低电平接 VSS |
> [!BUG] 开漏输出（OD）意味着输出引脚可以拉低（0），但不能主动拉高（1），需要外部上拉电阻来拉高。所以初始电平是高阻态（高电平由外部上拉电阻提供）。

推挽输出（PP）意味着输出引脚可以拉高或拉低，可以直接输出高电平或低电平。
# 点亮板载 LED 1

> [!warning] 低电平点亮
> 
### 项目创建
![[ASLant_Images/68400a8134cc18c43f6c81a3f9ed6e6b_MD5.jpg]]

![[ASLant_Images/4404c2f4478958616ed4014e0c7fd6f9_MD5.jpg]]

### 原理图
![[ASLant_Images/d3a620c6dbf2e5e9d3eafbee465514c8_MD5.jpg]]

### CUBEMX 配置


![[ASLant_Images/075489761b6353c4a69ab847f3579a65_MD5.jpg]]

### Keil 5 代码
![[ASLant_Images/b0f36c72e806eae213c55cc05c2b5f3a_MD5.jpg]]

### 代码编译
![[ASLant_Images/6b3dd1802c7ee1f22ed99df591d07360_MD5.jpg]]

### 设备连接

![[ASLant_Images/5ecf98aa3fd783c703c2d47d6d569be8_MD5.jpg]]

### 代码烧录
> [!TIPS] 烧录前需要插电源、拔掉跳线帽

![[ASLant_Images/104430c180f3f7033273b7aacdf8b6f9_MD5.jpg]]

### 运行效果
![[ASLant_Images/f376267dc10c5079fb4c5500b22ab687_MD5.jpg]]


# LED 灯 0.5s闪烁

> [!BUG] 核心代码

```c
HAL_Delay(500);
HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
```
或
```c
HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
HAL_Delay(500);
HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
HAL_Delay(500);
```

# 按键控制 LED

> [!BUG] 由原理图可知按键位于 PC0引脚，且按下输入低电平

![[ASLant_Images/264641746a99ea2e1294e41eb244f975_MD5.jpg]]

![[ASLant_Images/7f0f0d547e5f21c634357094658e71d5_MD5.jpg]]

### CUBEMX 配置
![[ASLant_Images/004b9a806e7a2dc9e7c938975951adec_MD5.jpg]]

# 课后作业
### 要求
> [!BUG] 使用 Toggle_PIN函数 实现按键开关
> [该实验源代码](https://www.yuanxiapi.cn/api/lanzou/?url=https://aslant.lanzoul.com/i7qh31zd14te&type=down)

### 按键配置
![[ASLant_Images/39a773bf0d8cd066f7fc437a24aca66d_MD5.jpg]]

### 代码
> [!TIP] 在 main.c 文件中，添加到 while（1）中
> ```c
>     if (key_Scan () == 1)
>       {
>           HAL_GPIO_TogglePin (LED 1_GPIO_Port, LED 1_Pin);
>       }
>     HAL_Delay (100);
>  ```

![[ASLant_Images/d95578051d757db8fb8958532726a92a_MD5.jpg]]

### 实验效果

> [!important] 效果
> <video src="https://aslant-api.cn/98303bb7adee591f9dc440ce3f314c7f.mp4" width="100%" height="100%" controls="controls" class="rounded-video"></video>

# 作业

- #### 见邮件
