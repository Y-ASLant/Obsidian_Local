# 2024.05.24 华清远见实训日报

> [!hint] [[../Linux/GCC编译|GCC工具基础]]

> [!tip] [C语言基础](https://www.bookstack.cn/read/wangdoc-clang-tutorial/docs-syntax.md)

# 多文件编程-分模块编写逻辑代码
### 声明的头文件：.h
```text
头文件包含的内容:
  1.函数声明
  2.全局变量
  3.构造数据类型声明 struct union  enum
  4.宏定义   #define   N    50
  5.重定义名   typedef
  6.其他头文件


防止头文件重复包含：
#ifndef   <macro>    
              //判断<macro>是否被定义，如果被定义，
               //不执行 #define   <macro>，也不将文件内容复制过去
               //若没有被定义，就定义宏，同时将文件内容复制替换过去
#define   <macro>
 ....
#endif

```

> [!BUG] 个人习惯
所有 `.c` 文件均放在 `.\Core\Src` 目录中
所有 `.h` 文件均放在 `.\Core\Inc` 目录中
**好处在于添加新文件不用多次配置**
![[ASLant_Images/bf1efdb1efb60ec3e074a2df252f662a_MD5.jpg]]
[](../ASLant_Files/bf1efdb1efb60ec3e074a2df252f662a_MD5.jpg)en: bf1efdb1efb60ec3e074a2df252f662a_MD5.jpg]]
[](../ASLant_Files/bf1efdb1efb60ec3e074a2df252f662a_MD5.jpg)_Pin) == GPIO_PIN_RESET)
    {
        HAL_Delay(5);
        if (HAL_GPIO_ReadPin(KEY1_GPIO_Port, KEY1_Pin) == GPIO_PIN_RESET)
        {
            while (HAL_GPIO_ReadPin(KEY1_GPIO_Port, KEY1_Pin) == GPIO_PIN_RESET)
                return 1;
        }
    }
    return 0;
}

```

#### key.h
```c
#ifndef __KEY_H__
#define __KEY_H__

#define KEY1_Pin GPIO_PIN_0
#define KEY1_GPIO_Port GPIOC
#include "main.h"

uint8_t key_Scan(void);

#endif

```

### 1. 新建硬件分组
![[../ASLant_Files/a7c9d67ac7f13b5d963c4ecb577a87a1_MD5.jpg]]


![[../ASLant_Files/a61f0f5fde13294192f76f8e7165abdc_MD5.jpg]]
### 2. 添加已存在的.c文件
![[../ASLant_Files/ec50817c33f41e66d72becfe46edce4e_MD5.jpg]]

![[../ASLant_Files/c922af00f8a26666040720f534b714e0_MD5.jpg]]
### 3. 在main.c 添加引用
```c
#include "key.h"
```
### 4. 执行编译
![[../ASLant_Files/d5497dd0746975350385325f22001573_MD5.jpg]]

# 今日源代码

> [!BUG] 代码下载
> [下载](https://aslant.top/Cloud/OneDrive/Encryption/2024%E5%AE%9E%E8%AE%AD/Mechanical_Arm.7z)