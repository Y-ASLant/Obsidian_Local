## 题目要求 
> 使用定时器设计一个门铃    
> 按下触发蜂鸣器

## 原理图   

![[../ASLant_Files/77428d4005540d99b6123cd5d5d7eb90_MD5.jpg]]   

> [仿真源文件](/123pan/?d=N7orVv-TpMV3.html)

## 源代码   

```c
#include <reg52.h>
#define uchar unsigned char
#define uint unsigned int
sbit Key = P1 ^ 7;
sbit DoorBell = P3 ^ 0;
uint p = 0;

void Timer0() interrupt 1
{
	DoorBell = ~DoorBell;
	p++;
	if (p < 400)
	{
		TH0 = (8192 - 700) / 32;
		TL0 = (8192 - 700) % 32;
	}
	else if (p < 800)
	{
		TH0 = (8192 - 1000) / 32;
		TL0 = (8192 - 1000) % 32;
	}
	else
	{
		TR0 = 0;
		P = 0;
	}
}

void main()
{
	IE = 0x82;
	TMOD = 0x00;
	TH0 = (8192 - 700) / 32;
	TL0 = (8192 - 700) % 32;
	while (1)
	{
		if (Key == 0)
		{
			TR0 = 1;
			while (Key == 0)
				;
		}
	}
}

``` 

## 效果预览 

![[../ASLant_Files/88e6436e99788fd5d60e4ec2c3fe81c2_MD5.gif]]  